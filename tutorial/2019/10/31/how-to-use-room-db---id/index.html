<!DOCTYPE HTML>
<!--
    Future Imperfect by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>




<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.17.6"/>
<link rel="icon" href="http://localhost:8080/assets/media/favicon.png">


<meta name="robots" content="index, follow">



<title>Langkah - Langkah Menggunakan Room Database</title>


<meta name="description" content="Mediandraa stand for my name, Aditya Chandra, and I&#39;m from Indonesia. I&#39;m an Android Developer with occasionally taking over Web Service Development too. This is my blog, so please enjoy.">



<link rel="prev" href="http://localhost:8080/tutorial/2019/10/30/how-my-repositories-organized-part-1---id">



<script>
    window.site = {"orchidVersion":"0.17.6","baseUrl":"http://localhost:8080","environment":"debug","version":"1"};
</script>





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: FutureImperfect -->
<!-- Class: com.eden.orchid.html5up.futureimperfect.FutureImperfectTheme -->

<!-- PAGE -->
<!-- Type: post -->
<!-- Class: com.eden.orchid.posts.pages.PostPage -->
<!-- Layout: single, index -->
<!-- Resolved Layout: templates/layouts/single.peb -->
<!-- Page Template: post-tutorial, post, page -->
<!-- Resolved Page Template:  -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: posts/tutorial/2019-10-31-how-to-use-room-db---id.md -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"tutorial/2019/10/31","baseUrl":"http://localhost:8080","fileName":"how-to-use-room-db---id/","extension":"html","usePrettyUrl":true,"link":"http://localhost:8080/tutorial/2019/10/31/how-to-use-room-db---id"},"previous":{"path":"tutorial/2019/10/30","baseUrl":"http://localhost:8080","fileName":"how-my-repositories-organized-part-1---id/","extension":"html","usePrettyUrl":true,"link":"http://localhost:8080/tutorial/2019/10/30/how-my-repositories-organized-part-1---id"},"description":"","title":"Langkah - Langkah Menggunakan Room Database"};
</script>

<!-- end:debug info -->



<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="http://localhost:8080/FutureImperfect/8cec4f6b/assets/css/futureImperfect_main.css" />
<link rel="stylesheet" type="text/css" href="http://localhost:8080/FutureImperfect/8cec4f6b/assets/css/futureImperfect_orchidCustomizations.css" />
<link rel="stylesheet" type="text/css" href="http://localhost:8080/FutureImperfect/8cec4f6b/assets/css/orchidSearch.css" />
<link rel="stylesheet" type="text/css" href="http://localhost:8080/assets/css/extraCss.css" />
<link rel="stylesheet" type="text/css" href="http://localhost:8080/assets/css/pygments.css" />
<!-- end:inject styles -->

</head>
<body class="
    single
">


<div id="search-results" data-orchid-search-results style="display: none;">
    <header>Search Results</header>
    <ul></ul>
</div>

<!-- Wrapper -->
<div id="wrapper">

    <!-- Header -->
    <header id="header">
        <h1><a href="http://localhost:8080">Mediandraa</a></h1>
        <nav class="links">
            <ul>
            
            </ul>
        </nav>
        <nav class="main">
            <ul>
                <li class="search">
                    <a class="fa-search" href="#search">Search</a>
                    <form id="search" data-orchid-search="">
                        <input type="text" name="query" id="query" placeholder="Search"/>
                    </form>
                    <div id="search-progress" data-orchid-search-progress style="display: none;">
                        <div class="loader">Loading...</div>
                    </div>
                </li>
                <li class="menu">
                    <a class="fa-bars" href="#menu">Menu</a>
                </li>
            </ul>
        </nav>
    </header>

    <!-- Menu -->
    <section id="menu">

        <!-- Search -->
        <section>
            <form class="search" id="search" data-orchid-search="">
                <input type="text" name="query" placeholder="Search"/>
            </form>
            <div id="search-progress" data-orchid-search-progress style="display: none;">
                <div class="loader">Loading...</div>
            </div>
        </section>

        <!-- Links -->
        <section>
            <ul class="links">
            
            </ul>
        </section>

    </section>

    

    <!-- Main -->
    <div id="main">
        
    <!-- start:inject components -->
    
        
            
                
                    
                        <article class="post single">
    <header>
        <div class="title">
            <h2><a href="http://localhost:8080/tutorial/2019/10/31/how-to-use-room-db---id">Langkah - Langkah Menggunakan Room Database</a></h2>

            
            
            <a href="http://localhost:8080/categories/tutorial">Tutorial</a>
            
            
            
        </div>
        <div class="meta">
            <time class="published" datetime="2019-10-31">
            October 31, 2019
            </time>
            
                <a href="http://localhost:8080/authors/aditya-chandra" class="author">
                    <span class="name">Aditya Chandra</span>
                    <img src="https://www.gravatar.com/avatar/139fdfd374f84353763148c4a559da4b" alt="Aditya Chandra"/>
                </a>
            
        </div>
    </header>
    
    
    <h3 id="pembuka">Pembuka</h3>
<p>Penggunaan <strong>SQLite</strong> secara mentah sudah tidak direkomendasikan, karena tingkat kerumitannya yang membuat proses pengembangan aplikasi menjadi cukup lama. Oleh karena itu, muncullah <strong>Room Database</strong> yang merupakan pembungkus (<em>wrapper</em>) dari SQLite.</p>
<p>Dengan menggunakan <strong>Room</strong>, kita bisa fokus kepada proses bisnis dibandingkan implementasi atau pengaturan database yang kelewat <em>ruwet</em>. Jadi, langsung aja kita bahas cara menggunakan <strong>Room</strong> di project kamu.</p>
<hr />
<h3 id="mempersiapkan-room-sqlite-database">Mempersiapkan Room (SQLite) Database</h3>
<hr />
<p>Lihat cara memasukkan <strong>Room</strong> ke Android Studio, <a href="https://developer.android.com/jetpack/androidx/releases/room#declaring_dependencies">disini</a>. Kemudian lihat cara penggunaan <strong>Room</strong>, <a href="https://developer.android.com/training/data-storage/room">disini</a>. Untuk bagian instalasi atau pemasangan <strong>Room</strong> di Android Studio bisa mengacu pada tautan di atas. Jadi, prosesnya akan aku lewati.</p>
<p>Berikut langkah - langkah yang untuk menggunakan <strong>Room</strong> di project kita.</p>
<hr />
<h4 id="pertama">Pertama</h4>
<p>Buat sebuah <strong>@Entity</strong>, kita sebut <strong>NewsEntity</strong> dengan struktur seperti ini :</p>
<pre><code class="language-kotlin">@Entity
data class NewsEntity(
  @PrimaryKey
  val id: Int? = null,
  val title: String,
  val content: String,
  val date: String,
  val views: Int
)
</code></pre>
<hr />
<h4 id="kedua">Kedua</h4>
<p>Buat <strong>@DAO (Data Access Object)</strong> dengan nama <strong>NewsDao</strong> seperti ini :</p>
<pre><code class="language-kotlin">@Dao
interface NewsDao() {

  // menambahkan data, replace jika ada conflict ID
  @Insert(onConflict = OnConflictStrategy.REPLACE)
  fun create(vararg news: NewsEntity)

  @Update
  fun update(vararg news: NewsEntity)

  @Delete
  fun delete(vararg news: NewsEntity)

  // mengambil berita dari urutan tanggal terbaru
  // default limit = 15
  @Query(&quot;SELECT * FROM NewsEntity ORDER BY date DESC LIMIT :limit&quot;)
  fun getLatestList(limit: Int = 15): List&lt;NewsEntity&gt;

  // mengambil berita populer berdasarkan view terbanyak
  // default limit = 5
  @Query(&quot;SELECT * FROM NewsEntity ORDER BY views DESC LIMIT :limit&quot;)
  fun getPopularList(limit: Int = 5): List&lt;NewsEntity&gt;

  // mengambil satu berita berdasarkan id, mengembalikan nullable
  @Query(&quot;SELECT * FROM NewsEntity WHERE id = :id&quot;)
  fun getOne(id: Int): NewsEntity?

}
</code></pre>
<hr />
<h4 id="ketiga">Ketiga</h4>
<p>Tambahkan class dengan anotasi <strong>@Database</strong> bernama <strong>AppDatabase</strong>, sbb :</p>
<pre><code class="language-kotlin">@Database(entities = arrayOf(NewsEntity::class), version = 1)
abstract class AppDatabase : RoomDatabase() {
  
  abstract fun newsDao(): NewsDao

}
</code></pre>
<hr />
<h4 id="keempat">Keempat</h4>
<p>Agar <strong>Room</strong> bisa diakses melalui <strong>Activity</strong> manapun, maka kita perlu menulis kode berikut tepat di luar class <strong>AppDatabase</strong> :</p>
<pre><code class="language-kotlin">fun Context.getDb() {
  return Room.databaseBuilder(
    this,
    AppDatabase::class.java,
    &quot;database-name&quot;
  )
}
</code></pre>
<p>Hasil akhir <strong>AppDatabase</strong> seperti ini :</p>
<pre><code class="language-kotlin">@Database(entities = arrayOf(NewsEntity::class), version = 1)
abstract class AppDatabase : RoomDatabase() {
  
  abstract fun newsDao(): NewsDao

}

fun Context.getDb(): AppDatabase {
  return Room
    .databaseBuilder(this, AppDatabase::class.java, &quot;your-db-name&quot;)
    .allowMainThreadQueries(true)
    .build()
}
</code></pre>
<hr />
<h4 id="kelima">Kelima</h4>
<p>Kita bisa mengambil data berita di <strong>activity</strong> melalui <strong>Room</strong> dengan cara :</p>
<pre><code class="language-kotlin">
  private val mLatestNewsList by lazy { mutableListOf&lt;NewsEntity&gt;() }
  private val mNewsDao by lazy { getDb().newsDao() }

  fun onCreate(savedInstanceState: Bundle) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_news_list)

    mLatestNewsList.addAll( mNewsDao.getLatestList() )

    // TODO something with mLatestNewsList data
  }

</code></pre>
<p>Atau ingin menambahkan data berita dengan membuat fungsi :</p>
<pre><code class="language-kotlin">
fun createNews(news: NewsEntity) {
  context
    .getDb()
    .newsDao()
    .insert(news)
}

</code></pre>
<hr />
<p>Kamu bisa melakukan eksplorasi lebih dalam tentang <strong>Room Database</strong> dengan membaca <a href="https://developer.android.com/training/data-storage/room">dokumentasi</a>.</p>

    

    <div><b>Tags: </b></div>
    <footer>
        <ul class="stats">
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/learning">learning</a></li>
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/android-studio">android studio</a></li>
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/android">android</a></li>
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/kotlin">kotlin</a></li>
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/room">room</a></li>
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/database">database</a></li>
        
            <li><i class="fa fa-tag icon" aria-hidden="true"></i> <a href="http://localhost:8080/tags/indonesia">indonesia</a></li>
        
        </ul>
    </footer>
</article>
                    
                
            
        
    
    <!-- end:inject components -->



        <div class="pagination-single">
            

<!-- Pagination -->
<ul class="actions pagination">
    
        <li><a href="http://localhost:8080/tutorial/2019/10/30/how-my-repositories-organized-part-1---id" class="button big previous">Previous Page</a></li>
    

    
        <li><span class="disabled button big next">Next Page</span></li>
    
</ul>


        </div>
    </div>

    <!-- Footer -->
<section id="footer">
    <ul class="icons">
    
    
        <li><a href="https://linkedin.com/in/inibukanadit" class="fa-tag"><span class="label">linkedin</span></a></li>
    
        <li><a href="https://github.com/inibukanadit" class="fa-github"><span class="label">github</span></a></li>
    
        <li><a href="https://www.instagram.com/inibukanadit" class="fa-instagram"><span class="label">instagram</span></a></li>
    
        <li><a href="https://twitter.com/mediandraa_" class="fa-twitter"><span class="label">twitter</span></a></li>
    
    
    </ul>
    <p class="copyright">
        &copy; Mediandraa.
        Design by <a href="https://html5up.net/">HTML5 UP</a>.
        Created with <a href="https://orchid.netlify.com">Orchid</a>.
    </p>
</section>




</div>

<!-- start:inject scripts -->
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
<script  src="http://localhost:8080/FutureImperfect/8cec4f6b/assets/js/futureImperfect_util.js"></script>
<script  src="http://localhost:8080/FutureImperfect/8cec4f6b/assets/js/futureImperfect_main.js"></script>
<script  src="https://unpkg.com/lunr/lunr.js"></script>
<script  src="http://localhost:8080/FutureImperfect/8cec4f6b/assets/js/orchidSearch.js"></script>
<script  src="http://localhost:8080/assets/js/extraJs.js"></script>
<!-- end:inject scripts -->

</body>
</html>